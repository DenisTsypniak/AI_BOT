{% extends "base.html" %}

{% block title %}–°—Ç–∞–Ω –ü–µ—Ä—Å–æ–Ω–∏ - Live Role Bot{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">–°—Ç–∞–Ω –ü–µ—Ä—Å–æ–Ω–∏</h1>
    <p class="page-description">–ü–æ—Ç–æ—á–Ω—ñ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ —Ä–∏—Å–∏, —à–≤–∏–¥–∫–æ—Å—Ç—ñ –∑—Å—É–≤—É —Ç–∞ –∞–∫—Ç–∏–≤–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å –æ—Å–æ–±–∏—Å—Ç–æ—Å—Ç—ñ.</p>
</div>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th style="width: 150px;">–Ø—Ä–ª–∏–∫ –†–∏—Å–∏</th>
                <th>–û–ø–∏—Å —Ç–∞ –ö–ª—é—á</th>
                <th style="text-align: right; width: 100px;">–ü–æ—Ç–æ—á–Ω–µ –ó–Ω–∞—á–µ–Ω–Ω—è</th>
                <th style="text-align: right; width: 100px;">–Ø–∫—ñ—Ä–Ω–µ –ó–Ω–∞—á–µ–Ω–Ω—è</th>
                <th style="text-align: right; width: 100px;">–®–≤–∏–¥–∫—ñ—Å—Ç—å –ó—Å—É–≤—É</th>
                <th style="width: 100px;">–î–æ–∫–∞–∑–∏</th>
                <th style="width: 120px;">–û—Å—Ç–∞–Ω–Ω—è –∑–º—ñ–Ω–∞</th>
            </tr>
        </thead>
        <tbody>
            {% for trait in traits %}
            <tr>
                <td>
                    <strong>{{ trait.label }}</strong>
                    <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 4px;">
                        {% if trait.status == 'active' %}
                        <span style="color: var(--success);">‚óè –ê–∫—Ç–∏–≤–Ω–∞</span>
                        {% elif trait.status == 'emerging' %}
                        <span style="color: var(--warning);">‚óè –ó–∞—Ä–æ–¥–∂—É—î—Ç—å—Å—è</span>
                        {% else %}
                        <span style="color: var(--text-muted);">‚óè {{ trait.status }}</span>
                        {% endif %}
                    </div>
                </td>
                <td>
                    <div style="font-family: monospace; font-size: 0.8rem; color: var(--accent); margin-bottom: 4px;">{{
                        trait.trait_key }}</div>
                    <div class="text-wrap" style="color: var(--text-muted); font-size: 0.9rem;">{{ trait.description }}
                    </div>
                </td>

                <td
                    class="font-weight-bold text-right text-lg {% if trait.current_value > 0.0 %}text-green{% elif trait.current_value < 0.0 %}text-red{% else %}text-white{% endif %}">
                    {{"%+.2f"|format(trait.current_value)}}
                </td>

                <td style="text-align: right; color: var(--text-muted); font-family: monospace;">
                    {{"%+.2f"|format(trait.anchor_value)}}
                </td>

                <td style="text-align: right;">
                    <span
                        class="{% if trait.drift_velocity > 0 %}text-green{% elif trait.drift_velocity < 0 %}text-red{% else %}text-muted{% endif %}">
                        {{"%+.3f"|format(trait.drift_velocity)}}
                    </span>
                </td>

                <td style="text-align: center;">
                    <span class="badge"
                        style="background-color: var(--surface-color); border: 1px solid var(--border-color);">{{
                        trait.evidence_count }} –µ–ª–µ–º.</span>
                </td>

                <td style="color: var(--text-muted); font-size: 0.85rem;">{{ trait.updated_at|kyiv_time(default='–ù/–î')
                    }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="7" style="text-align: center; padding: 30px; color: var(--text-muted);">–†–∏—Å —â–µ –Ω–µ –∑–∞–ø–∏—Å–∞–Ω–æ.
                    –ó—Ä–æ—Å—Ç–∞–Ω–Ω—è –ü–µ—Ä—Å–æ–Ω–∏ –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–º–∫–Ω–µ–Ω–µ.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="stats-grid" style="margin-top: 30px;">
    <div class="stat-card" style="border-left: 4px solid var(--warning);">
        <h3 style="margin-top: 0; color: var(--text-main);">–î–µ—Ç–∞–ª—ñ –†—É—à—ñ—è –ó—Ä–æ—Å—Ç–∞–Ω–Ω—è</h3>
        <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 0;">
            –†—É—à—ñ–π –ü–µ—Ä—Å–æ–Ω–∏ –∑–∞–ø—É—Å–∫–∞—î —Ñ–æ–Ω–æ–≤—ñ —Ü–∏–∫–ª–∏ —Ä–µ—Ñ–ª–µ–∫—Å—ñ—ó (–Ω–∞ –æ—Å–Ω–æ–≤—ñ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä–≤–∞–ª—ñ–≤), –æ—Ü—ñ–Ω—é—é—á–∏ –≤–∑–∞—î–º–æ–¥—ñ—ó
            —Ç–∞ –∫–æ—Ä–∏–≥—É—é—á–∏ –≤–µ–∫—Ç–æ—Ä–∏ –≤–∏—â–µ. –ó–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∏—Ä–æ–¥–Ω–æ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è –¥–æ –Ø–∫—ñ—Ä–Ω–∏—Ö –±–µ–∑ –ø—ñ–¥–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è.
        </p>
    </div>

    <div class="stat-card"
        style="border-left: 4px solid var(--accent); display: flex; flex-direction: column; gap: 10px;">
        <h3 style="margin-top: 0; margin-bottom: 5px; color: var(--text-main);">–î–µ—Ç–∞–ª—å–Ω—ñ –ñ—É—Ä–Ω–∞–ª–∏ –ü–µ—Ä—Å–æ–Ω–∏</h3>
        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
            <a href="/persona/card" class="btn primary" style="font-size: 0.85rem;">üé≠ –ö–∞—Ä—Ç–∫–∞ –ü–µ—Ä—Å–æ–Ω–∏</a>
            <a href="/persona/memory" class="btn primary" style="font-size: 0.85rem;">üß† –ü–∞–º'—è—Ç—å –ü–µ—Ä—Å–æ–Ω–∏</a>
            <a href="/persona/reflections" class="btn primary" style="font-size: 0.85rem;">üß† –†–µ—Ñ–ª–µ–∫—Å—ñ—ó</a>
            <a href="/persona/relationships" class="btn primary" style="font-size: 0.85rem;">ü§ù –í—ñ–¥–Ω–æ—Å–∏–Ω–∏</a>
            <a href="/persona/evidence" class="btn primary" style="font-size: 0.85rem;">üìÇ –î–æ–∫–∞–∑–∏ (Evidence)</a>
            <a href="/persona/audit" class="btn primary" style="font-size: 0.85rem;">üìú –ê—É–¥–∏—Ç –õ–æ–≥</a>
        </div>
    </div>
</div>
{% endblock %}
